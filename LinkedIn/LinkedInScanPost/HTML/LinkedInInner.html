<!doctype html>
<html>
	<head>
		<title>Selected LinkeIn posts</title>
		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" />
		<!-- Optional theme -->
		<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css" />
		<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
		<link rel="stylesheet" href="../CSS/ScanPosts.css" />

		<!-- Latest compiled and minified JavaScript -->
		<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
		<script type="text/javascript" src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
		<script type="text/javascript" src="http://cdn.jsdelivr.net/jquery.cookie/1.4.1/jquery.cookie.min.js"></script>
		<script type="text/javascript" src="../scripts/jquery.highlight-4.closure.js"></script>
		<script type="text/javascript" src="../scripts/jquery.highlight-4.js"></script>

		<!-- ReSharper disable ScriptTagHasBothSrcAndContentAttributes -->
		<!-- ReSharper disable InconsistentNaming -->
		<!-- ReSharper disable WrongExpressionStatement -->
		<!-- ReSharper disable StatementIsNotTerminated -->
		
		<script type="text/javascript" src="http://platform.linkedin.com/in.js">
			api_key: 75548prrx707qw
			scope: rw_groups
			authorize: true
		</script>

		<!--
			<script type="text/javascript" src="http://platform.linkedin.com/in.js">
			api_key: 75iztr1xt8c6k2
			scope: rw_groups
			authorize: true
		</script>
		-->

		<!-- ReSharper restore StatementIsNotTerminated -->
		<!-- ReSharper restore WrongExpressionStatement -->
		<!-- ReSharper restore InconsistentNaming -->
		<!-- ReSharper restore ScriptTagHasBothSrcAndContentAttributes -->
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	
		<script type="text/javascript" src="../JS/Settings.js"></script>
		<script type="text/javascript" src="../JS/LoadData.js"></script>
		<script type="text/javascript" src="../JS/Pages.js"></script>

		<!-- ReSharper disable UseOfImplicitGlobalInFunctionScope -->
		<script>
			var page = {
				showErrorMessage: function (error) {
					alert(error.message);
				},

				openPost: function (url) {
					if (isDefined(window.parent)) {
						console.log('open post: ' + url);
						window.parent.postMessage(url, "http://townbreath.com");
					}
				},

				linkedInLogout: function () {
					IN.User.logout(function () {
						document.getElementById('posts').innerHTML = "";
						document.getElementById('panel_posts').style.visibility = 'hidden';
						document.getElementById('panel_login').style.visibility = 'visible';
						updateParentHeight();
					});
				},

				linkedInFindMore: function () {
					window.location.reload(true);
				}
			}
		</script>

		<script type="text/javascript">
			var messageEventHandler = function (event) {
				if ((event.origin === 'http://townbreath.com')) {
					if (event.data === 'linkedInLogout')
						page.linkedInLogout();
					else if (event.data === 'linkedInFindMore')
						page.linkedInFindMore();
				}
			};

			(function() { window.addEventListener('message', messageEventHandler, false); })();
		</script>
		<!-- ReSharper restore UseOfImplicitGlobalInFunctionScope -->
	
		<!-- ReSharper disable UnusedParameter -->
		<!-- ReSharper disable StatementIsNotTerminated -->
		<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
				(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
				m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-58876334-1', 'auto');
			ga('send', 'pageview');
		</script>	
		<!-- ReSharper restore StatementIsNotTerminated -->
		<!-- ReSharper restore UnusedParameter -->
	</head>
<!-- ReSharper disable UnknownCssClass -->
	<body class="yui3-skin-sam	yui-skin-sam" onload="authLinkedIn();">
		<div class="panel panel-default" id="panel_posts">
			<div class="panel-heading">
				<h3 class="panel-title">Totals
					<span class="badge pull-right" id="selected" style="margin-left: 5px;">Selected</span>
					<span class="badge pull-right" id="new" style="margin-left: 5px;">New</span>
					<span class="badge pull-right" id="groups">Groups</span>
				</h3>
			</div>
			<div class="panel-body">
				<div id="posts">
				</div>
			</div>
		</div>
		
		<div class="jumbotron" style="visibility: hidden;" id="panel_login">
			<h1>Authentication required!</h1>
			<p>You should log into LinkedIn to see the posts.</p>
			<p><a class="btn btn-primary btn-lg" role="button" onclick="authLinkedIn();">Log In</a></p>
		</div>
	</body>
<!-- ReSharper restore UnknownCssClass -->
</html>
